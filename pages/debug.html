<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MyChatGPT Debug</title>
  <link rel="stylesheet" href="../styles.css" />
  <link rel="stylesheet" href="debug.css" />
</head>
<body>
  <main class="page debug-page">
    <header class="page-intro">
      <h1>Debug logs</h1>
      <p class="text-muted">Review diagnostics, export JSON dumps and trigger safe probes.</p>
    </header>

    <section id="panel-debug" class="page-section panel">
      <div>
        <h2 class="section-title">Log access</h2>
        <p>
          Use <strong>Manage extensions → Service worker → Inspect views</strong> to open the background log console
          (Chrome/Brave DevTools).
        </p>
        <p>
          On <strong>chatgpt.com</strong> tabs press <strong>Ctrl/Cmd + Shift + I</strong> to inspect the page and review
          content-script logs directly in DevTools. The <strong>Test log</strong> button will post to both consoles when an active
          chatgpt.com tab is available.
        </p>
      </div>
      <section id="debug-actions" class="section">
        <div class="toolbar">
          <button id="test-log-btn">Test log</button>
          <button id="connectivity-btn">Connectivity test (chatgpt.com)</button>
          <button id="check-cs-btn" class="button-sub">Check content script</button>
          <button id="probe-btn">Probe metadata (read-only)</button>
          <button id="heuristics-btn">Evaluate heuristics (active tab)</button>
          <button id="eval-backup-btn" class="button-sub">Evaluate &amp; Backup (if candidate)</button>
          <button id="autoscan-feed-btn">Auto-scan feed (stub)</button>
          <button id="capture-btn">Capture preview (read-only)</button>
          <button id="backup-btn" class="button-sub">
            <span>Backup now (manual)</span>
            <small id="backup-mode-label">Candidates only</small>
          </button>
          <button id="bulk-open-tabs-btn" class="button-sub">Backup candidates (open tabs)</button>
        </div>
      </section>
    </section>

    <div id="debug-toast" class="toast-stack" role="status" aria-live="polite"></div>

    <section class="page-section panel panel-bleed">
      <h2 class="section-title">Auto-scan feed</h2>
      <div id="scan-result" class="toast-stack" role="status" aria-live="polite"></div>
      <h2 class="section-title">Connectivity history</h2>
      <div id="connectivity-results" class="toast-stack" role="status" aria-live="polite"></div>
      <h2 class="section-title">Metadata probe history</h2>
      <div id="metadata-results" class="toast-stack" role="status" aria-live="polite"></div>
      <h2 class="section-title">Capture preview history</h2>
      <div id="capture-results" class="toast-stack" role="status" aria-live="polite"></div>
      <h2 class="section-title">Heuristics history</h2>
      <div id="heuristics-results" class="toast-stack" role="status" aria-live="polite"></div>
      <h2 class="section-title">Evaluate &amp; Backup history</h2>
      <div id="eval-backup-history" class="toast-stack" role="status" aria-live="polite"></div>
      <h2 class="section-title">Bulk backup (open tabs)</h2>
      <div id="bulk-open-tabs-history" class="toast-stack" role="status" aria-live="polite"></div>
      <h2 class="section-title">Manual backup status</h2>
      <div id="backup-toast" class="toast-stack" role="status" aria-live="polite"></div>
      <h2 class="section-title">Manual backup history</h2>
      <div id="backup-history" class="toast-stack" role="status" aria-live="polite"></div>
    </section>
  </main>

  <script src="../utils.js"></script>
  <script src="debug.js"></script>
</body>
</html>
