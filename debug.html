<section class="tab-card" data-tab-root="debug">
  <div class="flex-between">
    <h2>Diagnostics</h2>
    <div>
      <button data-action="scan-now">Scan Now</button>
      <button data-action="force-inject">Force inject content script</button>
      <button data-action="run-probe">Run extractor self-test (active tab)</button>
    </div>
  </div>
  <p class="tab-copy" data-role="inject-status"></p>
  <p class="tab-copy">
    Service worker logs live in chrome://extensions -> MyChatGPT -> "Service worker" -> Inspect.
  </p>
  <div class="flex-between">
    <label>
      Tail level
      <select data-role="log-level-filter">
        <option value="TRACE">TRACE</option>
        <option value="DEBUG">DEBUG</option>
        <option value="INFO" selected>INFO</option>
        <option value="WARN">WARN</option>
        <option value="ERROR">ERROR</option>
      </select>
    </label>
    <div>
      <button class="secondary" data-action="clear-logs">Clear logs</button>
      <button class="secondary" data-action="export-logs">Export JSON</button>
    </div>
  </div>
  <div class="log-list" data-role="log-tail"></div>
  <div class="flex-between">
    <small data-role="last-scan">No scans yet.</small>
  </div>
  <div class="tab-card" data-role="would-report">
    <div class="flex-between">
      <h3>Would-delete report (simulated)</h3>
      <div class="inline-group">
        <button class="secondary" data-action="report-refresh">Refresh report</button>
        <button class="secondary" data-action="report-export">Export CSV</button>
        <button class="secondary" data-action="report-clear">Clear report</button>
        <button data-action="report-scan-all">Scan all open chat tabs now</button>
      </div>
    </div>
    <p class="tab-copy">
      <span data-role="report-total-seen">0</span> tabs scanned •
      <span data-role="report-total-qualified">0</span> qualify • Updated
      <span data-role="report-updated">never</span>
    </p>
    <div class="table-scroll">
      <table class="data-table">
        <thead>
          <tr>
            <th>Title</th>
            <th>Last age (min)</th>
            <th>Msgs</th>
            <th>User msgs</th>
            <th>Reasons</th>
            <th>Link</th>
          </tr>
        </thead>
        <tbody data-role="report-rows"></tbody>
      </table>
    </div>
  </div>
  <div class="tab-card" data-role="probe-container">
    <div class="flex-between">
      <h3>Extractor Self-Test</h3>
      <button class="secondary" data-action="copy-probe" disabled>Copy JSON</button>
    </div>
    <pre class="code-block" data-role="probe-output">Run the probe to inspect extractor status.</pre>
  </div>
  <div class="tab-card" data-role="snapshot-container" hidden>
    <details>
      <summary>Last extractor snapshot</summary>
      <pre class="code-block" data-role="snapshot-output"></pre>
    </details>
  </div>
</section>
